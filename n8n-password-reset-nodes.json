[
  {
    "parameters": {
      "jsCode": "const crypto = require('crypto');\n\n// Generate a cryptographically secure 32-byte hex token\nconst passwordResetToken = crypto.randomBytes(32).toString('hex');\n\nreturn {\n  passwordResetToken\n};"
    },
    "id": "generate-reset-token",
    "name": "Generate Password Reset Token",
    "type": "n8n-nodes-base.code",
    "typeVersion": 2,
    "position": [250, 300]
  },
  {
    "parameters": {
      "jsCode": "const token = $input.item.json.passwordResetToken;\nconst resetUrl = `https://your-domain.com/reset-password?token=${token}`;\n\nconst passwordReset = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Password Reset</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f4f4f5;\">\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color: #f4f4f5; padding: 40px 20px;\">\n    <tr>\n      <td align=\"center\">\n        <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);\">\n          <!-- Header -->\n          <tr>\n            <td style=\"padding: 40px 40px 20px 40px; text-align: center; border-bottom: 1px solid #e5e7eb;\">\n              <h1 style=\"margin: 0; color: #111827; font-size: 24px; font-weight: 700;\">Password Reset Request</h1>\n            </td>\n          </tr>\n          \n          <!-- Content -->\n          <tr>\n            <td style=\"padding: 40px;\">\n              <p style=\"margin: 0 0 20px 0; color: #374151; font-size: 16px; line-height: 24px;\">\n                You recently requested to reset your password. Click the button below to create a new password:\n              </p>\n              \n              <!-- CTA Button -->\n              <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"margin: 30px 0;\">\n                <tr>\n                  <td align=\"center\">\n                    <a href=\"${resetUrl}\" style=\"display: inline-block; padding: 14px 32px; background-color: #2563eb; color: #ffffff; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px;\">Reset Password</a>\n                  </td>\n                </tr>\n              </table>\n              \n              <p style=\"margin: 20px 0 0 0; color: #6b7280; font-size: 14px; line-height: 20px;\">\n                Or copy and paste this link into your browser:\n              </p>\n              <p style=\"margin: 10px 0; padding: 12px; background-color: #f9fafb; border-radius: 4px; word-break: break-all;\">\n                <a href=\"${resetUrl}\" style=\"color: #2563eb; text-decoration: none; font-size: 14px;\">${resetUrl}</a>\n              </p>\n              \n              <div style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;\">\n                <p style=\"margin: 0 0 10px 0; color: #6b7280; font-size: 14px; line-height: 20px;\">\n                  <strong>Important Security Information:</strong>\n                </p>\n                <ul style=\"margin: 0; padding-left: 20px; color: #6b7280; font-size: 14px; line-height: 20px;\">\n                  <li style=\"margin-bottom: 8px;\">This link will expire in 1 hour</li>\n                  <li style=\"margin-bottom: 8px;\">If you didn't request this reset, please ignore this email</li>\n                  <li style=\"margin-bottom: 8px;\">Never share this link with anyone</li>\n                </ul>\n              </div>\n            </td>\n          </tr>\n          \n          <!-- Footer -->\n          <tr>\n            <td style=\"padding: 30px 40px; background-color: #f9fafb; border-top: 1px solid #e5e7eb; border-radius: 0 0 8px 8px;\">\n              <p style=\"margin: 0; color: #9ca3af; font-size: 12px; line-height: 18px; text-align: center;\">\n                This is an automated message, please do not reply to this email.\n              </p>\n              <p style=\"margin: 10px 0 0 0; color: #9ca3af; font-size: 12px; line-height: 18px; text-align: center;\">\n                Â© ${new Date().getFullYear()} Your Company. All rights reserved.\n              </p>\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n`.trim();\n\nreturn {\n  passwordReset\n};"
    },
    "id": "build-password-reset-email",
    "name": "Build Password Reset Email",
    "type": "n8n-nodes-base.code",
    "typeVersion": 2,
    "position": [450, 300]
  }
]
